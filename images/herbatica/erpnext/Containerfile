# Custom ERPNext image with XML Importer app
# Based on official ERPNext image with additional custom apps

FROM frappe/erpnext:v15.84.0

# Switch to frappe user for app installation
USER frappe

# Set working directory to bench
WORKDIR /home/frappe/frappe-bench

# Install XML Importer app from your GitHub repository
RUN bench get-app xml_importer https://github.com/UhrinDavid/erpnext_xml_importer.git

# Install Raven app from The-Commit-Company repository
RUN bench get-app https://github.com/The-Commit-Company/Raven.git

# Switch back to root for any final configurations
USER root

# Set proper ownership
RUN chown -R frappe:frappe /home/frappe/frappe-bench

# Switch back to frappe user for runtime
USER frappe

# Keep the original entrypoint from base image
# No need to override CMD - inherits from base image